<section ng-controller="ConcursosAsignarControlador as cac">
    <div class="page-header">
        <h1><i class="md md-visibility"></i> Recompensas activas</h1>
        <p class="lead">
            En esta sección podrás asignar una recompensa para el nivel NUMERO DE NIVEL
        </p>
    </div>
    <div class="row">
        <div class="col-md-4 col-lg-3">
            <div class="well white">
                <fieldset>
                    <legend><i class="md md-filter-list"></i> Buscar</legend>
                    <div class="form-group">
                        <label class="control-label">Patrocinador</label>
                        <select class="form-control" ng-model="cac.patrocinador" 
                                ng-options="patrocinador as patrocinador.nombre for patrocinador in cac.listaPatrocinadores">
                            <option value="">Seleccionar</option>
                        </select>
                    </div>
                    <div class="form-group pull-right">
                        <button type="reset" class="btn btn-default" ng-click="cac.limpiar()">Limpiar</button>
                        <button type="submit" class="btn btn-info"  ng-click="cac.buscar()">Buscar</button>
                    </div>
                </fieldset>
            </div>
        </div>
        <div class="col-md-8 col-lg-9">
            <div class="row no-m">
                <div class="well white">
                    <h3 class="table-title p-20">Recompensas del patrocinador {{cac.patrocinador.nombre}}</h3>
                    <table class="table table-full table-full-small">
                        <thead>
                            <tr>
                                <th class="text-center">Descripción</th>
                                <th class="text-center">Vigencia</th>
                                <th class="text-center">Disponible</th>
                                <th class="text-center">Cantidad</th>
                                <th class="text-center">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="form-group" ng-repeat="recompensa in cac.listaRecompensas">
                                <td class="text-center">{{recompensa.descripcion}}</td>
                                <td class="text-center">{{recompensa.vigencia | fechaCorta}}</td>
                                <td class="text-center">{{recompensa.cantidad}}</td>
                                <td class="text-center">
                                    <input class="form-control" ng-model="recompensa.nivel" type="number" min="0" max="{{recompensa.cantidad}}"/>
                                </td>
                                <td class="text-center">
                                    <button 
                                        type="button" 
                                        ng-click="cac.asignarRecompensa(recompensa)"
                                        class="btn btn-primary btn-sm">Asignar</i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>
